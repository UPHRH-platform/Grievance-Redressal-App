<app-breadcrumb [breadcrumbItems]="breadcrumbItems"></app-breadcrumb>
<div class="content">
  <img src="assets/images/back-button.png" title="back"  class="back-btn" (click)="navigateToHome()"  width="30" height="30">

    <h3>Ticket Management</h3>
    <mat-tab-group (selectedTabChange)="onTabChange($event)" mat-align-tabs="start" [selectedIndex]="activeTabIndex">
        <mat-tab *ngFor="let tab of tabs">
            <ng-template mat-tab-label>{{ tab.name }} ({{tab.name === this.selectedTabName ? length : '-'}})</ng-template>
            <app-shared-skeleton-loading [isLoading]="isDataLoading">
            </app-shared-skeleton-loading>
            <div style="display: flex; flex-direction: row;" *ngIf="!isDataLoading">
                <div>
                <form [formGroup]="searchForm">
                <mat-form-field>
                  <input
                    matInput
                    formControlName="searchData"
                    appearance="standard"
                    (keyup)="applyFilter($event.target.value)"
                    placeholder="Search"
                  />
                </mat-form-field>
                
              </form>
              
            </div>
            <app-common-filter *ngIf="!isDataLoading && userRole === 'Secretary'" (filteredvalue)="onClickApplyFilter($event)" (resetFilterValue)="resetFilterValueData($event)"></app-common-filter>
              </div>
            <ng-container *ngIf="!isDataLoading && grievancesTableColumns.length > 0">
              <app-shared-table [tableColumns]="grievancesTableColumns" [tableData]="grievances" [isPageable]="true"
              [length]="length" [pageSize]="pageSize" [hidePageSize]="false" [showPageSizeOptions]="true" [showFirstLastButtons]="true" [pageIndex]="pageIndex" 
                  (cellClickAction)="onClickItem($event)" [isServerSideSorting]="true" [isServerSidePagination]="true" (pageChange)="handlePageChange($event)" (searchParmas)="getSearchParams($event)">
              </app-shared-table>
            </ng-container>
        </mat-tab>
    </mat-tab-group>
</div>
