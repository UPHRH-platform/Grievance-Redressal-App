<app-breadcrumb [breadcrumbItems]="breadcrumbItems"></app-breadcrumb>
<div class="content">
    <img src="assets/images/back-button.png" title="back"  class="back-btn" (click)="navigateToHome()"  width="30" height="30">

    <div>
<!-- create User form UI -->
<div class="user-form-container">
    <form [formGroup]="userForm"  (ngSubmit)="onSubmit()">
    <div class="user-container">
        <h2 class="user-text-heading">{{isEditUser ? 'Edit User Details' : 'Create user'}}</h2>
        <div class="action-btns">
        <button  type="button" mat-raised-button  (click)="navigateToHome()" class="mr1">Cancel</button>
        <button type="submit" mat-raised-button color="primary" [disabled]="!userForm.valid || isProcessing">Save</button>
       </div> 
     </div>
     <div class="form-container">
      <div class="form-internal-wrapper">
        <h1>{{'User Details'}}</h1>
        
            <div class="wrapper-form">
                <div class="first-row-container" style="margin-top: 1%;">
                    <div class="first-container">
                        <h4>First Name</h4>
                        <mat-form-field appearance="outline" class="text-class">
                            <mat-label>First name</mat-label>
                            <input matInput placeholder="Enter first name" formControlName="firstName" required>
                            <mat-error *ngIf="firstName && firstName.hasError('required') && firstName.touched">please enter first name</mat-error>
                            <mat-error *ngIf="firstName && firstName.hasError('pattern')" >Name should contain characters within a-z/A-Z only</mat-error>
                          </mat-form-field>
                    </div>
                    <div class="first-container">
                        <h4>Last Name</h4>
                        <mat-form-field appearance="outline" class="text-class">
                            <mat-label>Last name</mat-label>
                            <input matInput placeholder="Enter last name" formControlName="lastName">
                            <mat-error *ngIf="lastName && lastName.hasError('required') && lastName.touched">please enter last name</mat-error>
                            <mat-error *ngIf="lastName && lastName.hasError('pattern')" >Name should contain characters within a-z/A-Z only</mat-error>

                          </mat-form-field>
                    </div>
                </div>

                <div class="first-row-container" style="margin-top: 1%;">
                    <div class="first-container">
                        <h4>Email Id</h4>
                        <mat-form-field appearance="outline" class="text-class">
                            <mat-label>Email id</mat-label>
                            <input matInput placeholder="pat@example.com" [readonly]="isEditUser? true: false" formControlName="username" required>
                            <mat-error *ngIf="username && username.invalid && username.touched">please Enter email Id</mat-error>
                          </mat-form-field>
                    </div>
                    <div class="first-container">
                        <h4>Phone Number</h4>
                        <mat-form-field appearance="outline" class="text-class">
                            <mat-label>Phone number</mat-label>
                            <input type="text" maxlength="10" matInput placeholder="Enter Phone number" formControlName="phone" required>
                            <mat-error *ngIf="phone && (phone.hasError('pattern') || phone.hasError('minlength') || phone.hasError('maxlength'))">
                                Phone number must contain 10 digits only
                            </mat-error>
                            <mat-error *ngIf="phone && phone.hasError('required')">
                                Phone number is required
                            </mat-error>
                          </mat-form-field>
                    </div>

                </div>

                <div class="first-row-container" style="margin-top: 1%;">
                    <div class="first-container">
                        <h4>Role</h4>
                        <mat-form-field appearance="outline" class="text-class">
                            <mat-label>Role</mat-label>
                            <mat-select formControlName="role" (selectionChange)="getRoleChange($event)">
                              <mat-option *ngFor="let item of roleList" [value]="item.name" >{{getUserRole(item.name)}}</mat-option>
                            </mat-select>
                            <mat-error *ngIf="role && role.invalid && role.touched">please select role</mat-error>

                          </mat-form-field>
                    </div>
                </div>

                <ng-container *ngIf="showCouncil">
                    <div class="first-row-container" style="margin-top: 1%;">
                        <div class="first-container">
                            <h4>Council</h4>
                            <mat-form-field appearance="outline" class="text-class">
                                <mat-label>Council</mat-label>
                                <mat-select formControlName="council" (selectionChange)="getDeparmentsList($event.value)">
                                    <ng-container *ngFor='let council of councilsList'>
                                        <mat-option [value]="council.ticketCouncilId">{{council.ticketCouncilName}}</mat-option>
                                    </ng-container>
                                </mat-select>
                                <mat-error *ngIf="council && council.invalid && council.touched">please select council</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="first-container">
                            <h4>Department</h4>
                            <mat-form-field appearance="outline" class="text-class">
                                <mat-label>Department</mat-label>
                                <mat-select formControlName="department">
                                    <ng-container *ngFor='let department of departmentsList'>
                                        <mat-option [value]="department.ticketDepartmentId">{{department.ticketDepartmentName}}</mat-option>
                                    </ng-container>
                                </mat-select>
                                <mat-error *ngIf="department && department.invalid && department.touched">please select Department Name</mat-error>
                            </mat-form-field> 
                        </div> 
                    </div>
                </ng-container>


                <div *ngIf="userDetails?.attributes?.role[0] !== 'ADMIN'">
                    <mat-label class="label-text">Active Status</mat-label>
                    <div class="first-container" style="margin-top: 2%;">
                        <mat-radio-group aria-label="Select an option" formControlName="status">
                            <mat-radio-button value="1" class="radio-btn" *ngFor="let status of statusList" [value]="status">{{status}}</mat-radio-button>
                           
                          </mat-radio-group>
                    </div>
                </div>
            </div>
      </div>
     </div>
  
    </form>

</div>
</div>

</div>
